
@model IEnumerable<SmoothieCity.Models.Smoothies>
@{

    ViewData["Title"] = "Cart";
    List<CartItem> c_data = new List<CartItem>();
    foreach (int i in ViewBag.CartData)
    {
        var cur_list = from c in c_data
                       select c.Smooth.SmoothieId;
        if (cur_list.Contains(i))
        {
            foreach (CartItem ci in c_data)
            {
                if (ci.Smooth.SmoothieId == i)
                {
                    ci.count++;
                }
            }
            continue;
        }

        foreach (Smoothies s in Model)
        {
            if (s.SmoothieId.Equals(i))
            {
                c_data.Add(new CartItem(s, 1));
                break;
            }
        }

    }

}

<style>
    .smoothie_img {
        width: 100px;
        height: 100px;
        border-radius: 4px;
    }
</style>

@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@if (SignInManager.IsSignedIn(User))
{

    <h1>Your Cart: </h1>

    @foreach (var item in ((List<CartItem>)c_data))
    {
        <p style="margin-bottom: 0px;"><b>@item.Smooth.SmoothieName</b></p>
        String numb = "x" + item.count;
        <p>
            <img style="margin-top: 0px" src=~/@item.Smooth.SmoothieImage class=smoothie_img />
            (@numb)
        </p>
    }


    <div>
        <a asp-area="" asp-controller="Smoothies" asp-action="Index">Back to List</a>
    </div>


    <center>

    </center>
}